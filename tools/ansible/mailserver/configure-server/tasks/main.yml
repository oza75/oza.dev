---
- name: CONF | Utilisateur
  include_tasks: create-user.yml
- name: Outils | Timezone
  community.general.timezone:
    name: Europe/Paris
- name: Outils | Locale fran√ßaise
  community.general.locale_gen:
    name: fr_FR.UTF-8
    state: present
- name: Outils | Requis
  apt:
    name:
      - gnupg
      - curl
    state: present
- name: Outils | Fish GPG Key
  when: ansible_distribution == 'Debian'
  apt_key:
    url: https://download.opensuse.org/repositories/shells:fish:release:3/Debian_{{ ansible_distribution_major_version }}/Release.key
- name: Outils | Fish repository
  when: ansible_distribution == 'Debian'
  apt_repository:
    repo: deb http://download.opensuse.org/repositories/shells:/fish:/release:/3/Debian_{{ ansible_distribution_major_version }}/ /
    state: present
- name: Outils | Fish ppa
  when: ansible_distribution == 'Ubuntu'
  apt_repository:
    repo: ppa:fish-shell/release-3
    state: present
- name: Outils | Install
  apt:
    name:
      - fish
      - git
      - ntp
      - make
    state: present
- name: Outils | Passage sur fish
  user:
    name: "{{ ansible_user }}"
    shell: /usr/bin/fish
